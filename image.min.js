/* eslint-disable no-console */

const imagemin = require('imagemin');
const imageminWebp = require('imagemin-webp');
const imageminPngquant = require('imagemin-pngquant');
const imageminMozjpeg = require('imagemin-mozjpeg');
const imageminSvgo = require('imagemin-svgo');

(async () => {
  const mozJpeg = await imagemin(['original-media/*{jpg,jpeg}'], './src/img/', {
    plugins: [
      imageminMozjpeg({ quality: 75 }), // JPG
    ],
  });
  console.log(`Done mozjpeg: ${mozJpeg.length}`);

  const minPng = await imagemin(['original-media/*png'], './src/img/', {
    plugins: [
      imageminPngquant({
        pngquant: { quality: '95-100' }, // PNG,
      }),
    ],
  });
  console.log(`Done minPng: ${minPng.length}`);

  const minSvg = await imagemin(['original-media/svg/*svg'], './src/img/svg', {
    plugins: [
      imageminSvgo({
        plugins: [{ removeViewBox: false }, { removeTitle: true }, { removeDimensions: true }],
      }),
    ],
  });
  console.log(`Done minSvg: ${minSvg.length}`);

  const webp = await imagemin(['./src/img/*{jpg,jpeg}'], './src/img/webp', {
    plugins: [imageminWebp({ quality: 75 })],
  });
  console.log(`Done webp: ${webp.length}`);
})();
